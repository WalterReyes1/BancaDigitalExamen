"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.GlobalHelpers = void 0;
const utils_1 = require("../utils");
/**
 * Global helpers depending on environment scoped global variables
 *
 *
 * @param globalVariables
 * @returns
 */
const GlobalHelpers = function (globalVariables) {
    return {
        setGlobalVar: function (...args) {
            // remove last item (handlebars options argument)
            const parameters = args.slice(0, -1);
            // we need at least the name and the value
            if (parameters.length < 2) {
                return;
            }
            const name = (0, utils_1.fromSafeString)(parameters[0]);
            const value = (0, utils_1.fromSafeString)(parameters[1]);
            globalVariables[name] = value;
        },
        getGlobalVar: function (...args) {
            var _a;
            // remove last item (handlebars options argument)
            const parameters = args.slice(0, -1);
            // we need at least the name
            if (parameters.length < 1) {
                return;
            }
            const name = (0, utils_1.fromSafeString)(parameters[0]);
            const path = (0, utils_1.fromSafeString)(parameters[1]);
            const defaultValue = (_a = (0, utils_1.fromSafeString)(parameters[2])) !== null && _a !== void 0 ? _a : '';
            if (globalVariables[name] === undefined) {
                return defaultValue;
            }
            return (0, utils_1.getValueFromPath)(globalVariables[name], path, defaultValue);
        }
    };
};
exports.GlobalHelpers = GlobalHelpers;
//# sourceMappingURL=global-helpers.js.map