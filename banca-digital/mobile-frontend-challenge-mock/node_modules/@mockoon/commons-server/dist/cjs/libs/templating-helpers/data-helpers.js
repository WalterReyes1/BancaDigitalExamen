"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.DataHelpers = void 0;
const handlebars_1 = require("handlebars");
const utils_1 = require("../utils");
const DataHelpers = function (processedDatabuckets) {
    const dataHelpers = {
        data: function (...args) {
            const parameters = args.slice(0, -1);
            if (parameters.length <= 0) {
                return;
            }
            const targetInfo = parameters[0];
            const targetDatabucket = processedDatabuckets.find((databucket) => databucket.id === targetInfo ||
                databucket.name.toLowerCase().includes(targetInfo.toLowerCase()));
            if (targetDatabucket === undefined) {
                return;
            }
            const value = (0, utils_1.getValueFromPath)(targetDatabucket.value, (0, utils_1.fromSafeString)(parameters[1]), '');
            if (Array.isArray(value) || typeof value === 'object') {
                return new handlebars_1.SafeString(JSON.stringify(value));
            }
            else {
                return new handlebars_1.SafeString(value);
            }
        },
        dataRaw: function (...args) {
            const parameters = args.slice(0, -1);
            if (parameters.length <= 0) {
                return;
            }
            const targetInfo = parameters[0];
            const targetDatabucket = processedDatabuckets.find((databucket) => databucket.id === targetInfo ||
                databucket.name.toLowerCase().includes(targetInfo.toLowerCase()));
            if (targetDatabucket === undefined) {
                return;
            }
            return (0, utils_1.getValueFromPath)(targetDatabucket.value, (0, utils_1.fromSafeString)(parameters[1]), '');
        }
    };
    return dataHelpers;
};
exports.DataHelpers = DataHelpers;
//# sourceMappingURL=data-helpers.js.map